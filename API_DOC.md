
# API Documentation

---

## Общая информация

API предоставляет CRUD-методы для работы с пользователями. Каждый метод возвращает JSON-ответ с результатом выполнения. Все ошибки обрабатываются с соответствующим кодом HTTP и текстом ошибки на русском языке.

---

## Формат ответа

**Успешный запрос:**

```json
{
  "success": true,
  "result": {
    // Данные результата
  }
}
```

**Ошибка:**

```json
{
  "success": false,
  "error": "Описание ошибки"
}
```

---

## Методы API

### 1. **Создание пользователя**

- **URL**: `/api/create`
- **Метод**: `POST`
- **Описание**: Создаёт нового пользователя.
- **Тело запроса** (JSON):
  ```json
  {
    "full_name": "John Doe",
    "role": "admin",
    "efficiency": 90
  }
  ```
- **Успешный ответ** (HTTP 201):
  ```json
  {
    "success": true,
    "result": {
      "id": 1
    }
  }
  ```
- **Ошибки**:
  - 400: Некорректный формат данных.
  - 422: Ошибки валидации.
  - 409: Пользователь с таким именем уже существует.

---

### 2. **Получение списка пользователей**

- **URL**: `/api/get`
- **Метод**: `GET`
- **Описание**: Возвращает список пользователей с возможностью фильтрации.
- **Параметры запроса**:
  - `role` (опционально): Фильтр по роли.
  - `sort_by` (опционально): Поле для сортировки (`full_name`, `efficiency`, `created_at`).
  - `order` (опционально): Порядок сортировки (`asc`, `desc`).
- **Пример запроса**:
  ```
  GET /api/get?role=admin&sort_by=efficiency&order=desc
  ```
- **Успешный ответ**:
  ```json
  {
    "success": true,
    "result": {
      "users": [
        {
          "id": 1,
          "full_name": "John Doe",
          "role": "admin",
          "efficiency": 90
        },
        {
          "id": 2,
          "full_name": "Jane Smith",
          "role": "editor",
          "efficiency": 85
        }
      ]
    }
  }
  ```
- **Ошибки**:
  - 404: Пользователи не найдены.

---

### 3. **Получение пользователя по ID**

- **URL**: `/api/get/{id}`
- **Метод**: `GET`
- **Описание**: Возвращает данные пользователя по ID.
- **Пример запроса**:
  ```
  GET /api/get/1
  ```
- **Успешный ответ**:
  ```json
  {
    "success": true,
    "result": {
      "user": {
        "id": 1,
        "full_name": "John Doe",
        "role": "admin",
        "efficiency": 90
      }
    }
  }
  ```
- **Ошибки**:
  - 400: Некорректный ID пользователя.
  - 404: Пользователь не найден.

---

### 4. **Обновление пользователя**

- **URL**: `/api/update/{id}`
- **Метод**: `PATCH`
- **Описание**: Обновляет данные пользователя.
- **Тело запроса** (JSON):
  ```json
  {
    "full_name": "Jane Doe",
    "efficiency": 95
  }
  ```
- **Успешный ответ**:
  ```json
  {
    "success": true,
    "result": {
      "id": 1,
      "full_name": "Jane Doe",
      "role": "admin",
      "efficiency": 95
    }
  }
  ```
- **Ошибки**:
  - 400: Некорректные данные.
  - 404: Пользователь не найден.

---

### 5. **Удаление пользователя**

- **URL**: `/api/delete/{id}`
- **Метод**: `DELETE`
- **Описание**: Удаляет пользователя по ID.
- **Пример запроса**:
  ```
  DELETE /api/delete/1
  ```
- **Успешный ответ**:
  ```json
  {
    "success": true,
    "result": {
      "id": 1,
      "full_name": "John Doe",
      "role": "admin",
      "efficiency": 90
    }
  }
  ```
- **Ошибки**:
  - 400: Некорректный ID.
  - 404: Пользователь не найден.
  - 500: Не удалось удалить пользователя.

---

## Рекомендации по тестированию

1. **Создайте пользователя**:
   ```
   POST /api/create
   ```
   Используйте тело запроса для проверки валидации.

2. **Получите список пользователей**:
   ```
   GET /api/get
   ```

3. **Обновите пользователя**:
   ```
   PATCH /api/update/{id}
   ```
   Убедитесь, что поля корректно обновляются.

4. **Удалите пользователя**:
   ```
   DELETE /api/delete/{id}
   ```
   Проверьте, что пользователь удалён.
